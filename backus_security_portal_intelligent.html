<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security Engagement Portal | The Backus Agency - Pushing buttons, so you don't have to.</title>
    <style>
        :root {
            --primary-bg: #0a0a0a;
            --secondary-bg: #141414;
            --tertiary-bg: #1a1a1a;
            --card-bg: #0f0f0f;
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --text-muted: #666666;
            --accent-red: #dc2626;
            --accent-red-dark: #991b1b;
            --accent-red-light: #ef4444;
            --accent-blue: #3498db;
            --accent-blue-dark: #2874a6;
            --accent-blue-light: #5dade2;
            --accent-glow: rgba(220, 38, 38, 0.3);
            --accent-glow-strong: rgba(220, 38, 38, 0.5);
            --success: #10b981;
            --warning: #f59e0b;
            --info: #3b82f6;
            --border: rgba(220, 38, 38, 0.1);
            --border-hover: rgba(220, 38, 38, 0.3);
            --gradient-red: linear-gradient(135deg, #dc2626 0%, #7f1d1d 100%);
            --gradient-blue: linear-gradient(135deg, #3498db 0%, #2874a6 100%);
            --gradient-dark: linear-gradient(180deg, #0a0a0a 0%, #000000 100%);
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.5);
            --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.6);
            --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.7);
            --shadow-xl: 0 12px 24px rgba(0, 0, 0, 0.8);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: var(--primary-bg);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Multi-Page Modal Styles */
        .intelligent-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            z-index: 10000;
            display: none;
            overflow-y: auto;
        }

        .intelligent-modal.active {
            display: block;
        }

        .modal-container {
            max-width: 900px;
            margin: 2rem auto;
            background: var(--secondary-bg);
            border: 1px solid var(--border);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow-xl);
        }

        .modal-header {
            background: var(--gradient-red);
            padding: 2rem;
            text-align: center;
            position: relative;
        }

        .modal-logo {
            width: 60px;
            height: 60px;
            margin: 0 auto 1rem;
        }

        .modal-title {
            font-size: 2rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.5rem;
        }

        .modal-subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.2);
            height: 6px;
            border-radius: 3px;
            margin-top: 1.5rem;
            overflow: hidden;
        }

        .progress-fill {
            background: white;
            height: 100%;
            border-radius: 3px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .modal-body {
            padding: 3rem;
            min-height: 400px;
        }

        .page {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .page-title {
            font-size: 1.75rem;
            color: var(--accent-red);
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .page-description {
            color: var(--text-secondary);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        /* Qualification Questions */
        .question-group {
            margin-bottom: 2rem;
        }

        .question-label {
            display: block;
            margin-bottom: 1rem;
            color: var(--text-primary);
            font-weight: 500;
            font-size: 1.1rem;
        }

        .options-grid {
            display: grid;
            gap: 1rem;
        }

        .option-card {
            background: var(--tertiary-bg);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .option-card:hover {
            border-color: var(--accent-red);
            transform: translateX(4px);
        }

        .option-card.selected {
            background: rgba(220, 38, 38, 0.1);
            border-color: var(--accent-red);
        }

        .option-card.selected::after {
            content: '✓';
            position: absolute;
            top: 1rem;
            right: 1rem;
            color: var(--accent-red);
            font-weight: bold;
            font-size: 1.2rem;
        }

        .option-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .option-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: var(--text-primary);
        }

        .option-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Form Inputs */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .form-label.required::after {
            content: ' *';
            color: var(--accent-red);
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 1rem;
            background: var(--tertiary-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--accent-red);
            box-shadow: 0 0 0 3px var(--accent-glow);
        }

        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }

        .checkbox-group {
            display: grid;
            gap: 0.75rem;
            margin-top: 0.5rem;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            color: var(--text-primary);
        }

        .checkbox-label input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 0.75rem;
            cursor: pointer;
        }

        /* Range Slider */
        .range-container {
            margin-top: 1rem;
        }

        .range-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: var(--tertiary-bg);
            outline: none;
            -webkit-appearance: none;
        }

        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--accent-red);
            cursor: pointer;
        }

        .range-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--accent-red);
            cursor: pointer;
            border: none;
        }

        .range-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .range-value {
            text-align: center;
            color: var(--accent-red);
            font-weight: 600;
            font-size: 1.2rem;
            margin-top: 0.5rem;
        }

        /* Modal Footer */
        .modal-footer {
            background: var(--tertiary-bg);
            padding: 2rem;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .step-indicator {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-secondary);
            border: 2px solid var(--border);
        }

        .btn-secondary:hover {
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .btn-primary {
            background: var(--gradient-red);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px var(--accent-glow-strong);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Summary Page */
        .summary-section {
            background: var(--tertiary-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .summary-title {
            color: var(--accent-red);
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .summary-content {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .recommendation-card {
            background: rgba(220, 38, 38, 0.05);
            border: 1px solid var(--accent-red);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .recommendation-title {
            color: var(--accent-red);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .recommendation-list {
            list-style: none;
            padding: 0;
        }

        .recommendation-list li {
            padding: 0.5rem 0;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .recommendation-list li::before {
            content: '→';
            color: var(--accent-red);
            font-weight: bold;
        }

        /* Success Message */
        .success-message {
            text-align: center;
            padding: 3rem;
        }

        .success-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .success-title {
            font-size: 2rem;
            color: var(--success);
            margin-bottom: 1rem;
        }

        .success-description {
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        /* Loading Spinner */
        .spinner {
            border: 3px solid var(--border);
            border-top: 3px solid var(--accent-red);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Landing Page */
        .landing-hero {
            text-align: center;
            padding: 6rem 0;
        }

        .hero-title {
            font-size: 3rem;
            font-weight: 700;
            background: var(--gradient-red);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .hero-subtitle {
            font-size: 1.5rem;
            color: var(--text-secondary);
            margin-bottom: 3rem;
        }

        .cta-button {
            padding: 1.5rem 3rem;
            font-size: 1.2rem;
            background: var(--gradient-red);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px var(--accent-glow);
        }

        .cta-button:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 30px var(--accent-glow-strong);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .modal-container {
                margin: 0;
                border-radius: 0;
                min-height: 100vh;
            }

            .modal-body {
                padding: 2rem;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Landing Page -->
    <div class="container" id="landingPage">
        <div class="landing-hero">
            <div style="width: 80px; height: 80px; margin: 0 auto 2rem;">
                <svg width="80" height="80" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="40" height="40" rx="8" fill="url(#gradient)"/>
                    <path d="M20 8L12 16V24L20 32L28 24V16L20 8Z" stroke="white" stroke-width="2" fill="none"/>
                    <circle cx="20" cy="20" r="4" fill="white"/>
                    <defs>
                        <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#dc2626;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#7f1d1d;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                </svg>
            </div>
            <h1 class="hero-title">The Backus Agency</h1>
            <p class="hero-subtitle">Pushing buttons, so you don't have to.</p>
            <button class="cta-button" onclick="startAssessment()">
                Begin Security Assessment →
            </button>
        </div>
    </div>

    <!-- Intelligent Multi-Page Modal -->
    <div class="intelligent-modal" id="assessmentModal">
        <div class="modal-container">
            <!-- Modal Header -->
            <div class="modal-header">
                <div class="modal-logo">
                    <svg width="60" height="60" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="40" height="40" rx="8" fill="white" fill-opacity="0.2"/>
                        <path d="M20 8L12 16V24L20 32L28 24V16L20 8Z" stroke="white" stroke-width="2" fill="none"/>
                        <circle cx="20" cy="20" r="4" fill="white"/>
                    </svg>
                </div>
                <h2 class="modal-title">Security Assessment Portal</h2>
                <p class="modal-subtitle" id="modalSubtitle">Let's understand your security needs</p>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
            </div>

            <!-- Modal Body -->
            <div class="modal-body">
                <!-- Page 1: Welcome & Basic Info -->
                <div class="page active" id="page1">
                    <h3 class="page-title">Welcome! Let's get started</h3>
                    <p class="page-description">
                        We'll guide you through a brief assessment to understand your security needs and determine the best approach for your organization.
                    </p>

                    <div class="form-group">
                        <label class="form-label required">Your Name</label>
                        <input type="text" class="form-input" id="contactName" placeholder="John Smith">
                    </div>

                    <div class="form-group">
                        <label class="form-label required">Email Address</label>
                        <input type="email" class="form-input" id="contactEmail" placeholder="john@company.com">
                    </div>

                    <div class="form-group">
                        <label class="form-label required">Company Name</label>
                        <input type="text" class="form-input" id="companyName" placeholder="Acme Corporation">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Your Role</label>
                        <select class="form-select" id="contactRole">
                            <option value="">Select your role...</option>
                            <option value="ciso">Chief Information Security Officer</option>
                            <option value="cto">Chief Technology Officer</option>
                            <option value="it-manager">IT Manager</option>
                            <option value="security-manager">Security Manager</option>
                            <option value="compliance">Compliance Officer</option>
                            <option value="executive">Executive/C-Suite</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>

                <!-- Page 2: Company Profile -->
                <div class="page" id="page2">
                    <h3 class="page-title">Tell us about your organization</h3>
                    <p class="page-description">
                        This helps us understand your industry requirements and compliance needs.
                    </p>

                    <div class="question-group">
                        <label class="question-label">What industry are you in?</label>
                        <div class="options-grid">
                            <div class="option-card" data-value="healthcare">
                                <div class="option-icon">🏥</div>
                                <div class="option-title">Healthcare</div>
                                <div class="option-description">Hospitals, clinics, medical services</div>
                            </div>
                            <div class="option-card" data-value="finance">
                                <div class="option-icon">🏦</div>
                                <div class="option-title">Financial Services</div>
                                <div class="option-description">Banking, insurance, fintech</div>
                            </div>
                            <div class="option-card" data-value="energy">
                                <div class="option-icon">⚡</div>
                                <div class="option-title">Energy & Utilities</div>
                                <div class="option-description">Power, oil & gas, utilities</div>
                            </div>
                            <div class="option-card" data-value="technology">
                                <div class="option-icon">💻</div>
                                <div class="option-title">Technology</div>
                                <div class="option-description">Software, SaaS, IT services</div>
                            </div>
                            <div class="option-card" data-value="manufacturing">
                                <div class="option-icon">🏭</div>
                                <div class="option-title">Manufacturing</div>
                                <div class="option-description">Industrial, production, supply chain</div>
                            </div>
                            <div class="option-card" data-value="government">
                                <div class="option-icon">🏛️</div>
                                <div class="option-title">Government</div>
                                <div class="option-description">Federal, state, local agencies</div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Organization Size</label>
                        <select class="form-select" id="companySize">
                            <option value="">Select size...</option>
                            <option value="1-50">1-50 employees</option>
                            <option value="51-200">51-200 employees</option>
                            <option value="201-1000">201-1000 employees</option>
                            <option value="1000+">1000+ employees</option>
                        </select>
                    </div>
                </div>

                <!-- Page 3: Security Maturity Assessment -->
                <div class="page" id="page3">
                    <h3 class="page-title">Security Maturity Assessment</h3>
                    <p class="page-description">
                        Help us understand your current security posture.
                    </p>

                    <div class="question-group">
                        <label class="question-label">Where are you in your security journey?</label>
                        <div class="options-grid">
                            <div class="option-card" data-value="initial">
                                <div class="option-icon">🌱</div>
                                <div class="option-title">Just Starting</div>
                                <div class="option-description">We're beginning to build our security program</div>
                            </div>
                            <div class="option-card" data-value="developing">
                                <div class="option-icon">🚀</div>
                                <div class="option-title">Developing</div>
                                <div class="option-description">We have basic security measures in place</div>
                            </div>
                            <div class="option-card" data-value="established">
                                <div class="option-icon">🛡️</div>
                                <div class="option-title">Established</div>
                                <div class="option-description">We have a mature security program</div>
                            </div>
                            <div class="option-card" data-value="advanced">
                                <div class="option-icon">🎯</div>
                                <div class="option-title">Advanced</div>
                                <div class="option-description">We're optimizing and fine-tuning</div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Have you had a security assessment before?</label>
                        <select class="form-select" id="previousAssessment">
                            <option value="">Select...</option>
                            <option value="never">Never</option>
                            <option value="1year">Within the last year</option>
                            <option value="2years">1-2 years ago</option>
                            <option value="3years">More than 2 years ago</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Any recent security incidents?</label>
                        <select class="form-select" id="recentIncidents">
                            <option value="">Select...</option>
                            <option value="none">No incidents</option>
                            <option value="minor">Minor incidents (resolved internally)</option>
                            <option value="major">Major incident requiring external help</option>
                            <option value="ongoing">Currently dealing with an issue</option>
                        </select>
                    </div>
                </div>

                <!-- Page 4: Specific Needs -->
                <div class="page" id="page4">
                    <h3 class="page-title">What brings you here today?</h3>
                    <p class="page-description">
                        Select all that apply to your current situation.
                    </p>

                    <div class="question-group">
                        <label class="question-label">Primary Security Concerns</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" value="compliance" name="concerns">
                                <span>Compliance requirements (HIPAA, PCI, SOC2, etc.)</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="vulnerability" name="concerns">
                                <span>Known vulnerabilities need assessment</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="incident" name="concerns">
                                <span>Recent security incident or breach</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="proactive" name="concerns">
                                <span>Proactive security improvement</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="vendor" name="concerns">
                                <span>Vendor/partner requirements</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="insurance" name="concerns">
                                <span>Insurance requirements</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="board" name="concerns">
                                <span>Board or investor mandate</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="other" name="concerns" id="concerns-other-checkbox">
                                <span>Other</span>
                            </label>
                        </div>
                        <div id="concerns-other-container" style="display: none; margin-top: 1rem;">
                            <input type="text" id="concerns-other-text" placeholder="Please specify your security concern..." style="width: 100%; padding: 0.75rem; border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.05); color: #e0e0e0; border-radius: 6px; font-size: 1rem;">
                        </div>
                    </div>

                    <div class="question-group">
                        <label class="question-label">Services You're Interested In</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" value="pentest" name="services">
                                <span>Penetration Testing</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="vulnerability" name="services">
                                <span>Vulnerability Assessment</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="compliance" name="services">
                                <span>Compliance Audit</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="incident" name="services">
                                <span>Incident Response</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="roadmap" name="services">
                                <span>Security Roadmap Development</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="training" name="services">
                                <span>Security Awareness Training</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="professional" name="services">
                                <span>Professional Services</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" value="other" name="services" id="services-other-checkbox">
                                <span>Other</span>
                            </label>
                        </div>
                        <div id="services-other-container" style="display: none; margin-top: 1rem;">
                            <input type="text" id="services-other-text" placeholder="Please specify the service you're interested in..." style="width: 100%; padding: 0.75rem; border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.05); color: #e0e0e0; border-radius: 6px; font-size: 1rem;">
                        </div>
                    </div>
                </div>

                <!-- Page 5: Timeline & Budget -->
                <div class="page" id="page5">
                    <h3 class="page-title">Project Timeline & Investment</h3>
                    <p class="page-description">
                        This helps us prioritize and scale our recommendations.
                    </p>

                    <div class="question-group">
                        <label class="question-label">When do you need to start?</label>
                        <div class="options-grid">
                            <div class="option-card" data-value="immediate">
                                <div class="option-icon">🚨</div>
                                <div class="option-title">Immediately</div>
                                <div class="option-description">Urgent requirement</div>
                            </div>
                            <div class="option-card" data-value="month">
                                <div class="option-icon">📅</div>
                                <div class="option-title">Within 30 days</div>
                                <div class="option-description">Soon but not urgent</div>
                            </div>
                            <div class="option-card" data-value="quarter">
                                <div class="option-icon">📊</div>
                                <div class="option-title">This quarter</div>
                                <div class="option-description">Within 3 months</div>
                            </div>
                            <div class="option-card" data-value="planning">
                                <div class="option-icon">🗓️</div>
                                <div class="option-title">Planning phase</div>
                                <div class="option-description">Gathering information</div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Budget Range (Optional)</label>
                        <div class="range-container">
                            <input type="range" class="range-slider" id="budgetRange" min="1" max="5" value="3">
                            <div class="range-labels">
                                <span>&lt;$25K</span>
                                <span>$25-50K</span>
                                <span>$50-100K</span>
                                <span>$100-250K</span>
                                <span>$250K+</span>
                            </div>
                            <div class="range-value" id="budgetDisplay">$50-100K</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Additional Context</label>
                        <textarea class="form-textarea" id="additionalContext"
                                  placeholder="Any specific requirements, deadlines, or concerns we should know about?"></textarea>
                    </div>
                </div>

                <!-- Page 6: Tailored Recommendations -->
                <div class="page" id="page6">
                    <h3 class="page-title">Your Personalized Security Roadmap</h3>
                    <p class="page-description">
                        Based on your responses, here's what we recommend:
                    </p>

                    <div class="summary-section">
                        <div class="summary-title">
                            <span>🎯</span> Your Security Profile
                        </div>
                        <div class="summary-content" id="profileSummary">
                            <!-- Dynamically populated -->
                        </div>
                    </div>

                    <div class="summary-section">
                        <div class="summary-title">
                            <span>📋</span> Recommended Assessments
                        </div>
                        <div class="recommendation-card">
                            <div class="recommendation-title">Priority 1: Immediate Actions</div>
                            <ul class="recommendation-list" id="priority1List">
                                <!-- Dynamically populated -->
                            </ul>
                        </div>
                        <div class="recommendation-card">
                            <div class="recommendation-title">Priority 2: Short-term Goals</div>
                            <ul class="recommendation-list" id="priority2List">
                                <!-- Dynamically populated -->
                            </ul>
                        </div>
                        <div class="recommendation-card">
                            <div class="recommendation-title">Priority 3: Long-term Strategy</div>
                            <ul class="recommendation-list" id="priority3List">
                                <!-- Dynamically populated -->
                            </ul>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Would you like to schedule a consultation?</label>
                        <select class="form-select" id="scheduleConsultation">
                            <option value="yes">Yes, contact me to schedule</option>
                            <option value="later">Maybe later</option>
                            <option value="no">No thanks</option>
                        </select>
                    </div>
                </div>

                <!-- Page 7: Success -->
                <div class="page" id="page7">
                    <div class="success-message">
                        <div class="success-icon">✅</div>
                        <h3 class="success-title">Thank You!</h3>
                        <p class="success-description">
                            We've received your assessment and will send a detailed report to your email shortly.
                            Our security team will review your responses and may reach out with additional recommendations.
                        </p>
                        <div class="summary-section">
                            <div class="summary-title">What happens next?</div>
                            <ul class="recommendation-list">
                                <li>You'll receive a detailed assessment report via email</li>
                                <li>Our team will review your specific needs</li>
                                <li>We'll send tailored security recommendations</li>
                                <li>Optional: Schedule a free consultation call</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal Footer -->
            <div class="modal-footer">
                <div class="step-indicator">
                    Step <span id="currentStep">1</span> of <span id="totalSteps">7</span>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="prevBtn" onclick="previousPage()">
                        ← Back
                    </button>
                    <button class="btn btn-primary" id="nextBtn" onclick="nextPage()">
                        Continue →
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Cloud Assessment Handler with JSONBin.io - Cross-location Ready -->
    <script src="js/assessment-email-backup.js?v=2025100301"></script>
    <script src="js/security-assessment-jsonbin.js?v=2025100301"></script>

    <script>
        // State Management
        var currentPage = 1;
        var totalPages = 7;
        var assessmentData = {
            // Basic Info
            contactName: '',
            contactEmail: '',
            companyName: '',
            contactRole: '',

            // Company Profile
            industry: '',
            companySize: '',

            // Security Maturity
            maturityLevel: '',
            previousAssessment: '',
            recentIncidents: '',

            // Specific Needs
            concerns: [],
            services: [],

            // Timeline & Budget
            timeline: '',
            budget: '',
            additionalContext: '',

            // Recommendations
            scheduleConsultation: '',

            // Metadata
            assessmentDate: new Date().toISOString(),
            assessmentVersion: '2.0',
            userAgent: navigator.userAgent,
            referrer: document.referrer
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            updateProgress();
        });

        // Setup Event Listeners
        function setupEventListeners() {
            // Option cards
            document.querySelectorAll('.option-card').forEach(function(card) {
                card.addEventListener('click', function() {
                    handleOptionSelect(this);
                });
            });

            // Form inputs
            document.querySelectorAll('.form-input, .form-select, .form-textarea').forEach(function(input) {
                input.addEventListener('change', function() {
                    saveFormData();
                });
            });

            // Checkboxes
            document.querySelectorAll('input[type="checkbox"]').forEach(function(checkbox) {
                checkbox.addEventListener('change', function() {
                    saveCheckboxData();
                });
            });

            // Other concerns checkbox toggle
            const otherCheckbox = document.getElementById('concerns-other-checkbox');
            const otherContainer = document.getElementById('concerns-other-container');
            if (otherCheckbox && otherContainer) {
                otherCheckbox.addEventListener('change', function() {
                    otherContainer.style.display = this.checked ? 'block' : 'none';
                    if (!this.checked) {
                        document.getElementById('concerns-other-text').value = '';
                    }
                });
            }

            // Other services checkbox toggle
            const servicesOtherCheckbox = document.getElementById('services-other-checkbox');
            const servicesOtherContainer = document.getElementById('services-other-container');
            if (servicesOtherCheckbox && servicesOtherContainer) {
                servicesOtherCheckbox.addEventListener('change', function() {
                    servicesOtherContainer.style.display = this.checked ? 'block' : 'none';
                    if (!this.checked) {
                        document.getElementById('services-other-text').value = '';
                    }
                });
            }

            // Budget range slider
            var budgetSlider = document.getElementById('budgetRange');
            if (budgetSlider) {
                budgetSlider.addEventListener('input', function() {
                    updateBudgetDisplay(this.value);
                });
            }
        }

        // Start Assessment
        function startAssessment() {
            document.getElementById('landingPage').style.display = 'none';
            document.getElementById('assessmentModal').classList.add('active');
            currentPage = 1;
            showPage(currentPage);
        }

        // Navigation
        function nextPage() {
            if (validateCurrentPage()) {
                saveFormData();

                if (currentPage === 5) {
                    // Generate recommendations before showing page 6
                    generateRecommendations();
                }

                if (currentPage === 6) {
                    // Submit assessment
                    submitAssessment();
                }

                if (currentPage < totalPages) {
                    currentPage++;
                    showPage(currentPage);
                }
            }
        }

        function previousPage() {
            if (currentPage > 1) {
                currentPage--;
                showPage(currentPage);
            }
        }

        function showPage(pageNum) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(function(page) {
                page.classList.remove('active');
            });

            // Show current page
            document.getElementById('page' + pageNum).classList.add('active');

            // Update progress
            updateProgress();

            // Update buttons
            updateButtons();

            // Update step indicator
            document.getElementById('currentStep').textContent = pageNum;
        }

        function updateProgress() {
            var progress = (currentPage / totalPages) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function updateButtons() {
            var prevBtn = document.getElementById('prevBtn');
            var nextBtn = document.getElementById('nextBtn');

            // Previous button
            if (currentPage === 1) {
                prevBtn.style.display = 'none';
            } else {
                prevBtn.style.display = 'block';
            }

            // Next button
            if (currentPage === 6) {
                nextBtn.innerHTML = 'Submit Assessment →';
            } else if (currentPage === 7) {
                nextBtn.innerHTML = 'Close';
                nextBtn.onclick = function() {
                    closeAssessment();
                };
            } else {
                nextBtn.innerHTML = 'Continue →';
            }
        }

        // Handle option selection
        function handleOptionSelect(card) {
            var group = card.parentElement;
            var value = card.getAttribute('data-value');

            // Clear other selections in same group
            group.querySelectorAll('.option-card').forEach(function(c) {
                c.classList.remove('selected');
            });

            // Select this card
            card.classList.add('selected');

            // Save selection
            if (currentPage === 2) {
                assessmentData.industry = value;
            } else if (currentPage === 3) {
                assessmentData.maturityLevel = value;
            } else if (currentPage === 5) {
                assessmentData.timeline = value;
            }
        }

        // Save form data
        function saveFormData() {
            // Page 1
            assessmentData.contactName = document.getElementById('contactName')?.value || '';
            assessmentData.contactEmail = document.getElementById('contactEmail')?.value || '';
            assessmentData.companyName = document.getElementById('companyName')?.value || '';
            assessmentData.contactRole = document.getElementById('contactRole')?.value || '';

            // Page 2
            assessmentData.companySize = document.getElementById('companySize')?.value || '';

            // Page 3
            assessmentData.previousAssessment = document.getElementById('previousAssessment')?.value || '';
            assessmentData.recentIncidents = document.getElementById('recentIncidents')?.value || '';

            // Page 5
            assessmentData.additionalContext = document.getElementById('additionalContext')?.value || '';

            // Page 6
            assessmentData.scheduleConsultation = document.getElementById('scheduleConsultation')?.value || '';
        }

        // Save checkbox data
        function saveCheckboxData() {
            // Concerns
            assessmentData.concerns = [];
            document.querySelectorAll('input[name="concerns"]:checked').forEach(function(cb) {
                if (cb.value === 'other') {
                    const otherText = document.getElementById('concerns-other-text').value.trim();
                    if (otherText) {
                        assessmentData.concerns.push('Other: ' + otherText);
                    }
                } else {
                    assessmentData.concerns.push(cb.value);
                }
            });

            // Services
            assessmentData.services = [];
            document.querySelectorAll('input[name="services"]:checked').forEach(function(cb) {
                if (cb.value === 'other') {
                    const otherText = document.getElementById('services-other-text').value.trim();
                    if (otherText) {
                        assessmentData.services.push('Other: ' + otherText);
                    }
                } else {
                    assessmentData.services.push(cb.value);
                }
            });
        }

        // Update budget display
        function updateBudgetDisplay(value) {
            var displays = ['<$25K', '$25-50K', '$50-100K', '$100-250K', '$250K+'];
            document.getElementById('budgetDisplay').textContent = displays[value - 1];
            assessmentData.budget = displays[value - 1];
        }

        // Validate current page
        function validateCurrentPage() {
            if (currentPage === 1) {
                var name = document.getElementById('contactName').value;
                var email = document.getElementById('contactEmail').value;
                var company = document.getElementById('companyName').value;

                if (!name || !email || !company) {
                    alert('Please fill in all required fields');
                    return false;
                }

                if (!validateEmail(email)) {
                    alert('Please enter a valid email address');
                    return false;
                }
            }

            return true;
        }

        function validateEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        // Generate tailored recommendations
        function generateRecommendations() {
            var profile = generateProfile();
            var priorities = generatePriorities();

            // Update profile summary
            document.getElementById('profileSummary').innerHTML = profile;

            // Update priority lists
            document.getElementById('priority1List').innerHTML = priorities.immediate.map(function(item) {
                return '<li>' + item + '</li>';
            }).join('');

            document.getElementById('priority2List').innerHTML = priorities.shortTerm.map(function(item) {
                return '<li>' + item + '</li>';
            }).join('');

            document.getElementById('priority3List').innerHTML = priorities.longTerm.map(function(item) {
                return '<li>' + item + '</li>';
            }).join('');
        }

        function generateProfile() {
            var profile = [];

            // Industry specific
            if (assessmentData.industry === 'healthcare') {
                profile.push('Healthcare organization requiring HIPAA compliance');
            } else if (assessmentData.industry === 'finance') {
                profile.push('Financial services requiring PCI DSS and SOX compliance');
            } else if (assessmentData.industry === 'energy') {
                profile.push('Energy/utilities sector with OT/IT convergence needs');
            }

            // Maturity level
            if (assessmentData.maturityLevel === 'initial') {
                profile.push('Beginning security program development');
            } else if (assessmentData.maturityLevel === 'developing') {
                profile.push('Enhancing existing security measures');
            } else if (assessmentData.maturityLevel === 'established') {
                profile.push('Optimizing mature security program');
            }

            // Urgency
            if (assessmentData.timeline === 'immediate') {
                profile.push('Urgent security requirements');
            }

            // Incidents
            if (assessmentData.recentIncidents === 'major' || assessmentData.recentIncidents === 'ongoing') {
                profile.push('Recent security incident requiring immediate attention');
            }

            return profile.join('<br>• ');
        }

        function generatePriorities() {
            var priorities = {
                immediate: [],
                shortTerm: [],
                longTerm: []
            };

            // Immediate priorities
            if (assessmentData.recentIncidents === 'ongoing') {
                priorities.immediate.push('Incident Response and Containment');
            }

            if (assessmentData.concerns.includes('compliance')) {
                priorities.immediate.push('Compliance Gap Assessment');
            }

            if (assessmentData.services.includes('pentest')) {
                priorities.immediate.push('Penetration Testing of Critical Assets');
            }

            if (assessmentData.maturityLevel === 'initial') {
                priorities.immediate.push('Security Baseline Assessment');
            }

            // Short-term priorities
            if (assessmentData.services.includes('vulnerability')) {
                priorities.shortTerm.push('Comprehensive Vulnerability Assessment');
            }

            if (assessmentData.concerns.includes('vendor')) {
                priorities.shortTerm.push('Third-Party Risk Assessment');
            }

            if (assessmentData.industry === 'energy') {
                priorities.shortTerm.push('OT/IT Network Segmentation Review');
            }

            // Long-term priorities
            if (assessmentData.services.includes('roadmap')) {
                priorities.longTerm.push('Strategic Security Roadmap Development');
            }

            if (assessmentData.services.includes('training')) {
                priorities.longTerm.push('Security Awareness Training Program');
            }

            priorities.longTerm.push('Continuous Security Monitoring Implementation');

            // Default items if empty
            if (priorities.immediate.length === 0) {
                priorities.immediate.push('Initial Security Assessment');
            }

            if (priorities.shortTerm.length === 0) {
                priorities.shortTerm.push('Security Policy Development');
            }

            if (priorities.longTerm.length === 0) {
                priorities.longTerm.push('Security Program Maturation');
            }

            return priorities;
        }

        // Submit assessment
        function submitAssessment() {
            // Add final timestamp
            assessmentData.submittedAt = new Date().toISOString();

            // Calculate assessment score
            assessmentData.assessmentScore = calculateAssessmentScore();

            // Use simple submission that always works
            if (window.submitAssessmentSimple) {
                var result = window.submitAssessmentSimple(assessmentData);
                console.log('Assessment submitted:', result.submissionId);
            } else {
                // Fallback to original Formspree method
                sendToFormspree();
            }

            // Show success page
            currentPage = 7;
            showPage(currentPage);
        }

        function calculateAssessmentScore() {
            var score = 0;
            var factors = {
                maturityLevel: {
                    'initial': 1,
                    'developing': 2,
                    'established': 3,
                    'advanced': 4
                },
                timeline: {
                    'immediate': 4,
                    'month': 3,
                    'quarter': 2,
                    'planning': 1
                },
                incidents: {
                    'none': 4,
                    'minor': 3,
                    'major': 2,
                    'ongoing': 1
                }
            };

            score += factors.maturityLevel[assessmentData.maturityLevel] || 0;
            score += factors.timeline[assessmentData.timeline] || 0;
            score += factors.incidents[assessmentData.recentIncidents] || 0;
            score += assessmentData.concerns.length;
            score += assessmentData.services.length;

            return score;
        }

        function sendToFormspree() {
            // Prepare form data
            var formData = new FormData();
            formData.append('_subject', 'New Security Assessment: ' + assessmentData.companyName);
            formData.append('name', assessmentData.contactName);
            formData.append('email', assessmentData.contactEmail);
            formData.append('company', assessmentData.companyName);
            formData.append('role', assessmentData.contactRole);
            formData.append('industry', assessmentData.industry);
            formData.append('size', assessmentData.companySize);
            formData.append('maturity', assessmentData.maturityLevel);
            formData.append('previous_assessment', assessmentData.previousAssessment);
            formData.append('incidents', assessmentData.recentIncidents);
            formData.append('concerns', assessmentData.concerns.join(', '));
            formData.append('services', assessmentData.services.join(', '));
            formData.append('timeline', assessmentData.timeline);
            formData.append('budget', assessmentData.budget);
            formData.append('context', assessmentData.additionalContext);
            formData.append('consultation', assessmentData.scheduleConsultation);
            formData.append('score', assessmentData.assessmentScore);
            formData.append('date', assessmentData.assessmentDate);

            // Send to Formspree endpoint (Intelligent Security Assessment Portal)
            fetch('https://formspree.io/f/xjkgvqll', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(function(response) {
                console.log('Assessment submitted successfully');
            }).catch(function(error) {
                console.error('Error submitting assessment:', error);
            });
        }

        function closeAssessment() {
            document.getElementById('assessmentModal').classList.remove('active');
            document.getElementById('landingPage').style.display = 'block';

            // Reset form
            currentPage = 1;
            assessmentData = {};
        }
    </script>
</body>
</html>